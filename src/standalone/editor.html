<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>D2 Editor</title>
  <link rel="stylesheet" href="editor.css">
</head>
<body>
  <div class="standalone">
    <div class="sa-header">
      <div class="sa-header-left">
        <span class="sa-logo">D2 Editor</span>
        <input type="text" id="draft-name" class="sa-draft-name" placeholder="Untitled" />
      </div>
      <div class="sa-header-actions">
        <button class="sa-btn" id="btn-new" title="New draft"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M9 15h6"/><path d="M12 12v6"/></svg> New</button>
        <button class="sa-btn" id="btn-open" title="Open draft"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></svg> Open</button>
        <button class="sa-btn" id="btn-format" title="Format (Ctrl+Shift+F)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10H3"/><path d="M21 6H3"/><path d="M21 14H3"/><path d="M21 18H3"/></svg> Format</button>
        <div class="sa-export-wrap">
          <button class="sa-btn" id="btn-export" title="Export diagram"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Export</button>
          <div class="sa-export-dropdown" id="export-dropdown" style="display:none">
            <button class="sa-export-option" data-export="svg">Export as SVG</button>
            <button class="sa-export-option" data-export="png">Export as PNG</button>
            <button class="sa-export-option" data-export="copy">Copy SVG</button>
          </div>
        </div>
        <button class="sa-btn sa-btn-toggle" id="btn-preview" title="Toggle preview"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/></svg> Preview</button>
        <button class="sa-btn sa-btn-toggle" id="btn-options" title="Diagram options"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg> Options</button>
      </div>
    </div>
    <div class="sa-body">
      <div class="sa-editor-pane" id="editor-container"></div>
      <div class="sa-preview-pane" id="preview-pane" style="display:none">
        <div class="sa-preview-toolbar">
          <button class="sa-btn sa-btn-sm" id="pv-zoom-in">+</button>
          <button class="sa-btn sa-btn-sm" id="pv-zoom-out">&minus;</button>
          <button class="sa-btn sa-btn-sm" id="pv-reset">1:1</button>
          <span class="sa-zoom-label" id="pv-zoom-label">100%</span>
        </div>
        <div class="sa-preview-content" id="preview-content">
          <div class="sa-preview-canvas" id="preview-canvas">
            <div class="sa-preview-empty">Toggle preview and start editing</div>
          </div>
        </div>
      </div>
      <div class="sa-options-pane" id="options-pane" style="display:none">
        <div class="sa-options-title">Diagram Options</div>
        <div class="sa-options-form">
          <label class="sa-opt-label">Theme
            <select id="opt-theme" class="sa-opt-input">
              <option value="0">0 (Default)</option>
              <option value="1">1 (Neutral Grey)</option>
              <option value="3">3 (Vanilla)</option>
              <option value="4">4 (Aubergine)</option>
              <option value="5">5 (Cool Classics)</option>
              <option value="6">6 (Mixed Berry)</option>
              <option value="100">100 (Terminal)</option>
              <option value="101">101 (Terminal Grayscale)</option>
              <option value="102">102 (Origami)</option>
            </select>
          </label>
          <label class="sa-opt-label">Layout
            <select id="opt-layout" class="sa-opt-input">
              <option value="elk">elk</option>
              <option value="dagre">dagre</option>
            </select>
          </label>
          <label class="sa-opt-label">Direction
            <select id="opt-direction" class="sa-opt-input">
              <option value="up">up</option>
              <option value="down">down</option>
              <option value="left">left</option>
              <option value="right">right</option>
            </select>
          </label>
          <label class="sa-opt-label">Scale
            <input type="number" id="opt-scale" class="sa-opt-input" step="0.1" min="0.1" max="3" />
          </label>
          <label class="sa-opt-label">Sketch
            <select id="opt-sketch" class="sa-opt-input">
              <option value="false">false</option>
              <option value="true">true</option>
            </select>
          </label>
          <label class="sa-opt-label">Preset
            <input type="text" id="opt-preset" class="sa-opt-input" placeholder="(optional)" />
          </label>
        </div>
      </div>
    </div>
    <div class="sa-footer">
      <span id="status">Ready</span>
      <span class="sa-footer-right">
        <span class="sa-server-dot" id="server-dot"></span>
        <span id="server-url">no server</span>
        <span class="sa-sep">&middot;</span>
        <span id="last-saved"></span>
      </span>
    </div>

    <!-- Open dialog (hidden by default) -->
    <div class="sa-dialog-overlay" id="open-dialog" style="display:none">
      <div class="sa-dialog">
        <div class="sa-dialog-header">
          <span>Open Draft</span>
          <button class="sa-btn sa-btn-sm" id="open-dialog-close">&times;</button>
        </div>
        <div class="sa-dialog-body" id="open-dialog-list"></div>
      </div>
    </div>
  </div>
  <script src="editor.js" type="module"></script>
</body>
</html>
